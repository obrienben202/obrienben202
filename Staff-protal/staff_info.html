<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Staff Information</title>
    <link href="styles.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="container">
        <h1>Edit Staff Information</h1>
        <div id="viewMode">
            <div class="form-group">
                <label for="name">Name:</label>
                <span id="name">John Doe</span>
            </div>
            <div class="form-group">
                <label for="position">Position:</label>
                <span id="position">Manager</span>
            </div>
            <div class="form-group">
                <label for="phone">Phone Number (UK format):</label>
                <span id="phone">+44 1234567890</span>
            </div>
            <div class="form-group">
                <label for="address">Address:</label>
                <span id="address">123 Main St</span>
            </div>
            <div class="form-group">
                <label for="postalCode">Postal Code:</label>
                <span id="postalCode">12345</span>
            </div>
            <div class="form-group">
                <label for="age">Age:</label>
                <span id="age">30</span>
            </div>
            <div class="form-group">
                <label for="dob">Date of Birth:</label>
                <span id="dob">1990-01-01</span>
            </div>
            <div class="form-group">
                <label for="username">Username:</label>
                <span id="username">johndoe</span>
            </div>
            <div class="form-group">
                <label for="role">Role:</label>
                <span id="role">Manager</span>
            </div>
        </div>
        <div id="editMode" style="display: none;">
            <form id="staffForm">
                <div class="form-group">
                    <label for="name">Name:</label>
                    <input type="text" id="editName" name="name" required>
                </div>
                <div class="form-group">
                    <label for="position">Position:</label>
                    <input type="text" id="editPosition" name="position" required>
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number (UK format):</label>
                    <input type="text" id="editPhone" name="phone" required pattern="^\+?44[\s\d]{10,14}$">
                    <small>Example: +44 1234567890 or 01234 567890</small>
                </div>
                <div class="form-group">
                    <label for="address">Address:</label>
                    <input type="text" id="editAddress" name="address" required>
                </div>
                <div class="form-group">
                    <label for="postalCode">Postal Code:</label>
                    <input type="text" id="editPostalCode" name="postalCode" required>
                </div>
                <div class="form-group">
                    <label for="age">Age:</label>
                    <input type="number" id="editAge" name="age" required>
                </div>
                <div class="form-group">
                    <label for="dob">Date of Birth:</label>
                    <input type="date" id="editDob" name="dob" required>
                </div>
                <div class="form-group">
                    <label for="username">Username:</label>
                    <input type="text" id="editUsername" name="username" required>
                </div>
                <div class="form-group">
                    <label for="role">Role:</label>
                    <select id="editRole" name="role" required>
                        <option value="admin">Admin</option>
                        <option value="manager">Manager</option>
                        <option value="employee">Employee</option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="submit" value="Save">
                </div>
            </form>
        </div>
        <button id="toggleModeButton" onclick="toggleMode()">Edit Mode</button>
        <button onclick="goBack()">Back to Index</button>
    </div>

    <script>
        // Retrieve stored staff information from sessionStorage
        var staffInfo = JSON.parse(sessionStorage.getItem('staffInfo'));
        if (staffInfo) {
            // Fill in the form with the retrieved information
            document.getElementById('editName').value = staffInfo.name;
            document.getElementById('editPosition').value = staffInfo.position;
            document.getElementById('editPhone').value = staffInfo.phone;
            document.getElementById('editAddress').value = staffInfo.address;
            document.getElementById('editPostalCode').value = staffInfo.postalCode;
            document.getElementById('editAge').value = staffInfo.age;
            document.getElementById('editDob').value = staffInfo.dob;
            document.getElementById('editUsername').value = staffInfo.username;
            document.getElementById('editRole').value = staffInfo.role;
        }

        function toggleMode() {
            var viewMode = document.getElementById('viewMode');
            var editMode = document.getElementById('editMode');
            var toggleButton = document.getElementById('toggleModeButton');

            if (viewMode.style.display === 'none') {
                viewMode.style.display = 'block';
                editMode.style.display = 'none';
                toggleButton.textContent = 'Edit Mode';
            } else {
                viewMode.style.display = 'none';
                editMode.style.display = 'block';
                toggleButton.textContent = 'View Mode';
            }
        }

        function goBack() {
            window.location.href = 'index.html'; // Redirect to index.html
        }

        document.getElementById("staffForm").addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent default form submission
            
            // Retrieve form values
            var name = document.getElementById("editName").value;
            var position = document.getElementById("editPosition").value;
            var phone = document.getElementById("editPhone").value;
            var address = document.getElementById("editAddress").value;
            var postalCode = document.getElementById("editPostalCode").value;
            var age = document.getElementById("editAge").value;
            var dob = document.getElementById("editDob").value;
            var username = document.getElementById("editUsername").value;
            var password = document.getElementById("editPassword").value;
            var role = document.getElementById("editRole").value;

            // Store staff information in sessionStorage
            var staffInfo = {
                name: name,
                position: position,
                phone: phone,
                address: address,
                postalCode: postalCode,
                age: age,
                dob: dob,
                username: username,
                password: password,
                role: role
            };
            sessionStorage.setItem('staffInfo', JSON.stringify(staffInfo));

            // Redirect back to index.html
            window.location.href = 'index.html';
        });
    </script>
</body>
</html>